import { createClient } from '@supabase/supabase-js'; import dotenv from 'dotenv'; dotenv.config({ path: '.env.server' }); const supabaseAdmin = createClient(process.env.VITE_SUPABASE_URL || process.env.SUPABASE_URL, process.env.SUPABASE_SERVICE_ROLE_KEY || process.env.VITE_SUPABASE_SERVICE_ROLE_KEY || process.env.VITE_SUPABASE_KEY || process.env.SUPABASE_KEY); async function log() { const cart = { tenant_id: 'c4795ceb-ab04-4bca-9ff2-c7f763a89045', external_id: 'cart_123', client_name: 'test', email: 'e@test.com', phone: '', product: 'P', value: 10, date: new Date().toISOString(), items: [], recovered: false }; const { error } = await supabaseAdmin.from('abandoned_checkouts').upsert(cart, { onConflict: 'tenant_id, external_id', ignoreDuplicates: false }); console.log(error || 'Success'); } log();
